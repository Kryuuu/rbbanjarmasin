<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="utf-8">
    <title>Dashboard Konten | Rumah BUMN Banjarmasin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="../assets/png/rumah-bumn.png">
    <style>
        :root {
            color-scheme: light dark;
        }
        body {
            margin: 0;
            min-height: 100vh;
            font-family: 'Manrope', 'Segoe UI', 'Roboto', sans-serif;
            background: radial-gradient(120% 120% at 50% 0%, #1ba0db 0%, #195770 60%, #0f2534 100%);
            color: #f8fafc;
            display: flex;
            flex-direction: column;
            align-items: stretch;
        }
        body.cms-active {
            background: #0f172a;
            color: initial;
        }
        #welcome {
            flex: 1;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem 1rem;
        }
        body.cms-active #welcome {
            display: none;
        }
        .card {
            width: min(420px, 100%);
            background: rgba(15, 23, 42, 0.55);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 1.5rem;
            padding: 2.5rem 2rem;
            box-shadow: 0 24px 60px rgba(8, 47, 73, 0.35);
            backdrop-filter: blur(18px);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        body.cms-active .card {
            display: none;
        }
        .card::before {
            content: '';
            position: absolute;
            inset: -40%;
            background: conic-gradient(from 180deg, rgba(56, 189, 248, 0.4), transparent 45%, rgba(14, 165, 233, 0.35), transparent 75%);
            filter: blur(40px);
            z-index: 0;
        }
        .card > * {
            position: relative;
            z-index: 1;
        }
        .card h1 {
            font-size: clamp(1.8rem, 5vw, 2.4rem);
            margin-bottom: 0.75rem;
            font-weight: 700;
        }
        .card p {
            margin: 0 0 2rem;
            color: rgba(241, 245, 249, 0.75);
            line-height: 1.6;
        }
        .actions {
            display: flex;
            flex-direction: column;
            gap: 0.85rem;
        }
        .btn {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            gap: 0.6rem;
            padding: 0.85rem 1.5rem;
            border-radius: 999px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.2s ease;
        }
        .btn-primary {
            background: linear-gradient(135deg, #38bdf8, #0ea5e9);
            color: #0f172a;
            border: none;
            box-shadow: 0 14px 30px rgba(56, 189, 248, 0.35);
        }
        .btn-primary:hover {
            filter: brightness(1.05);
        }
        .btn-secondary {
            background: transparent;
            border: 1px solid rgba(241, 245, 249, 0.4);
            color: #e2e8f0;
        }
        .btn-secondary:hover {
            background: rgba(241, 245, 249, 0.1);
        }
        #nc-root {
            display: none;
            flex: 1;
            min-height: 100vh;
        }
        body.cms-active #nc-root {
            display: block;
        }
        small {
            display: block;
            margin-top: 2.2rem;
            font-size: 0.78rem;
            color: rgba(226, 232, 240, 0.55);
        }
        footer {
            margin: 1.5rem auto 0;
            font-size: 0.7rem;
            color: rgba(226, 232, 240, 0.3);
            text-align: center;
        }
        body.cms-active footer {
            display: none;
        }
    </style>
</head>
<body>
    <main class="welcome" id="welcome">
        <div class="card">
            <h1>Rumah BUMN CMS</h1>
            <p>Kelola berita, statistik pembinaan, testimoni UMKM, serta mitra & kolaborator secara terpusat.</p>
            <div class="actions">
                <a class="btn btn-primary" href="#" id="open-cms">Buka Dashboard</a>
                <a class="btn btn-secondary" href="/" target="_blank" rel="noopener noreferrer">Lihat Halaman Utama</a>
            </div>
            <small>Masuk menggunakan akun staf yang telah diundang.</small>
        </div>
    </main>

    <div id="nc-root" hidden></div>

    <footer>&copy; 2025 Rumah BUMN Banjarmasin</footer>

    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <script src="https://unpkg.com/netlify-cms@^2/dist/netlify-cms.js"></script>
    <script>
        const identity = window.netlifyIdentity;
        const body = document.body;
        const cmsRoot = document.getElementById('nc-root');
        const openCmsButton = document.getElementById('open-cms');
        let cmsHasStarted = false;

        function startCMS() {
            if (cmsHasStarted) {
                return;
            }
            if (!window.CMS) {
                console.warn('CMS belum dimuat.');
                return;
            }

            cmsHasStarted = true;
            body.classList.add('cms-active');
            cmsRoot.removeAttribute('hidden');
            window.CMS.init();
        }

        if (openCmsButton) {
            openCmsButton.addEventListener('click', (event) => {
                event.preventDefault();
                startCMS();
            });
        }

        if (identity) {
            identity.on('init', (user) => {
                if (user) {
                    startCMS();
                } else {
                    identity.on('login', startCMS);
                }
            });
        }
    </script>
</body>
</html>
